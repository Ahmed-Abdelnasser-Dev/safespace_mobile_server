{
  "info": {
    "name": "safespace-mobile-server",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health",
      "request": {
        "method": "GET",
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": ["{{baseUrl}}"],
          "path": ["health"]
        }
      }
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "POST /auth/register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.accessToken) pm.environment.set('accessToken', json.accessToken);",
                  "if (json && json.refreshToken) pm.environment.set('refreshToken', json.refreshToken);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"strong-password\",\n  \"fullName\": \"User Name\",\n  \"phone\": \"+201234567890\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          }
        },
        {
          "name": "POST /auth/login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.accessToken) pm.environment.set('accessToken', json.accessToken);",
                  "if (json && json.refreshToken) pm.environment.set('refreshToken', json.refreshToken);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{ \"email\": \"user@example.com\", \"password\": \"strong-password\", \"deviceId\": \"string\", \"fcmToken\": \"string\" }"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "POST /auth/refresh-token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const json = pm.response.json();",
                  "if (json && json.accessToken) pm.environment.set('accessToken', json.accessToken);",
                  "if (json && json.refreshToken) pm.environment.set('refreshToken', json.refreshToken);"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": { "mode": "raw", "raw": "{ \"refreshToken\": \"{{refreshToken}}\" }" },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh-token",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh-token"]
            }
          }
        },
        {
          "name": "POST /auth/logout",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": { "mode": "raw", "raw": "{ \"refreshToken\": \"{{refreshToken}}\" }" },
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            }
          }
        }
      ]
    },
    {
      "name": "Accidents & Emergency",
      "item": [
        {
          "name": "POST /accident/report-accident",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"location\": { \"lat\": 30.0444, \"lng\": 31.2357 },\n  \"message\": \"optional message from the user\",\n  \"occurredAt\": \"2026-01-29T12:34:56.000Z\",\n  \"media\": [\n    { \"type\": \"image\", \"url\": \"https://example.com/image.jpg\" }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/accident/report-accident",
              "host": ["{{baseUrl}}"],
              "path": ["accident", "report-accident"]
            }
          }
        },
        {
          "name": "POST /accident/emergency-request",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"requestedAt\": \"2026-01-29T12:34:56.000Z\",\n  \"location\": { \"lat\": 30.0444, \"lng\": 31.2357 },\n  \"message\": \"optional\",\n  \"requestTypes\": [\"police\", \"medical\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/accident/emergency-request",
              "host": ["{{baseUrl}}"],
              "path": ["accident", "emergency-request"]
            }
          }
        }
      ]
    },
    {
      "name": "Central Unit",
      "item": [
        {
          "name": "POST /central-unit/send-accident-to-central-unit",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accidentId\": \"00000000-0000-0000-0000-000000000000\",\n  \"description\": \"string\",\n  \"latitude\": 30.0444,\n  \"longitude\": 31.2357,\n  \"severity\": \"low\",\n  \"media\": [ { \"type\": \"image\", \"url\": \"https://example.com/image.jpg\" } ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/central-unit/send-accident-to-central-unit",
              "host": ["{{baseUrl}}"],
              "path": ["central-unit", "send-accident-to-central-unit"]
            }
          }
        },
        {
          "name": "POST /central-unit/receive-accident-from-central-unit",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"centralUnitAccidentId\": \"string\",\n  \"occurredAt\": \"2026-01-29T12:34:56.000Z\",\n  \"location\": { \"lat\": 30.0444, \"lng\": 31.2357 }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/central-unit/receive-accident-from-central-unit",
              "host": ["{{baseUrl}}"],
              "path": ["central-unit", "receive-accident-from-central-unit"]
            }
          }
        }
      ]
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "POST /notifications/send-accident-notification",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"accidentId\": \"00000000-0000-0000-0000-000000000000\",\n  \"userIds\": [\"00000000-0000-0000-0000-000000000000\"],\n  \"title\": \"Accident nearby\",\n  \"body\": \"An accident was reported near you.\",\n  \"streetName\": \"Example Street Name\",\n  \"data\": { \"type\": \"ACCIDENT\", \"accidentId\": \"00000000-0000-0000-0000-000000000000\" }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/notifications/send-accident-notification",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "send-accident-notification"]
            }
          }
        }
      ]
    },
    {
      "name": "Profile (/me)",
      "item": [
        {
          "name": "GET /me/profile",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/me/profile",
              "host": ["{{baseUrl}}"],
              "path": ["me", "profile"]
            }
          }
        },
        {
          "name": "GET /me/medical-info",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/me/medical-info",
              "host": ["{{baseUrl}}"],
              "path": ["me", "medical-info"]
            }
          }
        },
        {
          "name": "PUT /me/medical-info",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"bloodType\": \"A+\",\n  \"allergies\": [\"Penicillin\", \"Peanuts\"],\n  \"chronicConditions\": [\"Diabetes Type 2\", \"Hypertension\"],\n  \"currentMedications\": [\"Metformin 500mg\", \"Lisinopril 10mg\"],\n  \"disabilities\": [],\n  \"medicalNotes\": \"Patient is allergic to penicillin. Please use alternative antibiotics.\",\n  \"heightCm\": 175.5,\n  \"weightKg\": 78.2,\n  \"smoker\": false,\n  \"alcoholConsumption\": \"occasional\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/me/medical-info",
              "host": ["{{baseUrl}}"],
              "path": ["me", "medical-info"]
            }
          }
        },
        {
          "name": "GET /me/identification",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/me/identification",
              "host": ["{{baseUrl}}"],
              "path": ["me", "identification"]
            }
          }
        },
        {
          "name": "PUT /me/identification",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullLegalName\": \"Ahmed Mohamed Hassan\",\n  \"dateOfBirth\": \"1990-05-15T00:00:00.000Z\",\n  \"gender\": \"male\",\n  \"nationality\": \"Egyptian\",\n  \"nationalIdNumber\": \"29005150123456\",\n  \"emergencyContactName\": \"Fatma Hassan\",\n  \"emergencyContactPhone\": \"+201234567890\",\n  \"emergencyContactRelation\": \"Spouse\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/me/identification",
              "host": ["{{baseUrl}}"],
              "path": ["me", "identification"]
            }
          }
        },
        {
          "name": "GET /me/personal-info",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/me/personal-info",
              "host": ["{{baseUrl}}"],
              "path": ["me", "personal-info"]
            }
          }
        },
        {
          "name": "PATCH /me/personal-info",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{accessToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"displayName\": \"Ahmed H.\",\n  \"username\": \"ahmed_hassan\",\n  \"profilePictureUrl\": \"https://example.com/photos/ahmed.jpg\",\n  \"phoneNumber\": \"+201234567890\",\n  \"country\": \"Egypt\",\n  \"city\": \"Cairo\",\n  \"address\": \"123 Tahrir Street\",\n  \"street\": \"Tahrir Street\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/me/personal-info",
              "host": ["{{baseUrl}}"],
              "path": ["me", "personal-info"]
            }
          }
        }
      ]
    }
  ],
  "variable": [
    { "key": "baseUrl", "value": "http://localhost:3000" },
    { "key": "accessToken", "value": "" },
    { "key": "refreshToken", "value": "" }
  ]
}

